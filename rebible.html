
<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>MUSICAL REBIBLE</title>
  <style>
    body {
      margin: 0;
      font-family: 'PAPERLOGY', sans-serif;
      background-color: #000;
      color: white;
      scroll-snap-type: y mandatory;
      overflow-y: scroll;
    }

    section {
      height: 100vh;
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      scroll-snap-align: start;
      padding: 20px;
      box-sizing: border-box;
    }

    h2 {
      color: #e62e2e;
      font-size: 36px;
      margin-bottom: 20px;
    }

    /* ê³µì—° ì•ˆë‚´ */
    .info-section { display: flex; justify-content: center; align-items: center; padding: 20px; }
    .info-container { display: flex; width: 90%; max-width: 1200px; gap: 30px; }
    .poster-side img { width: 100%; max-width: 500px; border-radius: 10px; object-fit: contain; }
    .details-side { flex: 1; display: flex; flex-direction: column; gap: 20px; }
    .info-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 20px; }
    .info-box { background-color: #1c2633; padding: 20px; border-radius: 10px; }
    .info-box h3 { color: #e62e2e; margin-bottom: 10px; }
    .notice-box { background-color: #1c1c1c; border: 2px solid #e62e2e; border-radius: 10px; padding: 20px; }
    .notice-box h3 { color: #e62e2e; margin-bottom: 15px; }
    .notice-box ul { list-style: none; padding: 0; margin: 0; }
    .notice-box li { margin-bottom: 10px; line-height: 1.6; }

    /* ì¤„ê±°ë¦¬ */
  .story { text-align: center; padding: 40px; overflow-y: auto; }
  .story .subtitle { font-size: 20px; color: #e62e2e; margin-bottom: 20px; }
  .story .description { max-width: 800px; line-height: 1.8; margin-bottom: 30px; }
  .image-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 20px; width: 80%; margin-top: 20px; }
  .image-grid img { width: 100%; max-height: 250px; object-fit: cover; border-radius: 10px; }

    /* ì˜ìƒ ì„¹ì…˜ */
.video-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
  gap: 20px;
  width: 90%;
  margin: 0 auto;
}

.video-grid video {
  width: 100%;
  height: auto;
  border-radius: 10px;
  background: #000;
  position: relative;
  z-index: 10;
}


    /* ì¶œì—°ì§„ */
    .cast-section { display: flex; flex-direction: column; justify-content: flex-start; align-items: center; padding: 20px; overflow-y: auto; }
    .cast { display: flex; flex-wrap: wrap; justify-content: center; gap: 20px; max-width: 90%; }
    .cast-card { background-color: #1c2633; padding: 10px; border-radius: 10px; width: 150px; text-align: center; }
    .cast-card img { width: 100%; border-radius: 10px; }

    /* ë°˜ì‘í˜• */
    @media (max-width: 768px) {
      .info-container { flex-direction: column; align-items: center; }
      .poster-side img { max-width: 90%; }
      .video-grid video { height: auto; }
    }

    /* ì±—ë´‡ UI (ì›ë³¸ ìœ ì§€) */
    .rebible-chat-toggle {
      position: fixed; right: 24px; bottom: 24px;
      background:#e62e2e; color:#fff; border:none; border-radius:24px;
      padding:12px 16px; font-size:14px; cursor:pointer; box-shadow:0 8px 24px rgba(0,0,0,.3);
      z-index:9999;
    }
    .rebible-chatbox {
      position: fixed; right:24px; bottom:80px; width:340px; max-width:90vw; height:460px;
      background:#1c2633; color:#fff; border-radius:16px; box-shadow:0 8px 24px rgba(0,0,0,.35);
      display:none; flex-direction:column; overflow:hidden; z-index:9999;
    }
    .rebible-chatbox header { background:#0f1722; padding:12px 14px; font-weight:600; display:flex; justify-content:space-between; align-items:center; }
    .rebible-chatbox header .title { display:flex; gap:8px; align-items:center; }
    .rebible-chatbox header .title span.dot { width:8px; height:8px; background:#35c46d; border-radius:50%; display:inline-block; }
    .rebible-chatbox .messages { flex:1; overflow-y:auto; padding:12px; gap:10px; display:flex; flex-direction:column; }
    .rebible-chatbox .msg { padding:10px 12px; border-radius:10px; line-height:1.5; max-width:85%; word-break:break-word; }
    .rebible-chatbox .msg.user { background:#233044; align-self:flex-end; }
    .rebible-chatbox .msg.bot { background:#111820; align-self:flex-start; }
    .rebible-chatbox .input { display:flex; gap:8px; padding:12px; background:#0f1722; }
    .rebible-chatbox input[type="text"] { flex:1; background:#0b1220; color:#fff; border:1px solid #263246; border-radius:10px; padding:10px; }
    .rebible-chatbox button.send { background:#e62e2e; color:#fff; border:none; border-radius:10px; padding:8px 12px; cursor:pointer; }
    .rebible-suggestion { display:flex; gap:6px; flex-wrap:wrap; padding:8px 12px; background:#111820; }
    .rebible-suggestion button {
      background:#233044; color:#fff; border:none; border-radius:16px; padding:6px 10px; cursor:pointer; font-size:12px;
    }
    .rebible-cta a {
      color:#fff; background:#e62e2e; text-decoration:none; padding:6px 10px; border-radius:10px; display:inline-block;
    }
    @media (max-width:480px) {
      .rebible-chatbox { width:95vw; right:2.5vw; bottom:84px; }
    }
  </style>
</head>

<body>

  <!-- 1. í†µí•© ê³µì—° ì•ˆë‚´ -->
  <section class="info-section">
    <div class="info-container">
      <!-- ì™¼ìª½: í¬ìŠ¤í„° -->
      <div class="poster-side">
        <img src="poster1.jpg" alt="ë®¤ì§€ì»¬ í¬ìŠ¤í„°">
      </div>

      <!-- ì˜¤ë¥¸ìª½: ê³µì—° ì•ˆë‚´ + ì¤‘ìš” ì•ˆë‚´ì‚¬í•­ -->
      <div class="details-side">
        <div class="info-grid">
          <div class="info-box"><h3>ê³µì—° ì¼ì‹œ</h3><p>2025ë…„ 11ì›” 12ì¼ (ìˆ˜)<br>19:30</p></div>
          <div class="info-box"><h3>ê³µì—° ì¥ì†Œ</h3><p>ì„œìš¸ì‹ í•™ëŒ€í•™êµ ì¡´í† ë§ˆìŠ¤í™€</p></div>
          <div class="info-box"><h3>í‹°ì¼“ ê°€ê²©</h3><p>ë¬´ë£Œ (ì˜ˆë§¤ í•„ìˆ˜)</p></div>
          <div class="info-box"><h3>ì˜ˆë§¤ ë°©ë²•</h3><p>ì¸ìŠ¤íƒ€ê·¸ë¨ ë§í¬íŠ¸ë¦¬<br>@rebible_musical</p></div>
        </div>

        <div class="notice-box">
          <h3>âš  ì¤‘ìš” ì•ˆë‚´ì‚¬í•­</h3>
          <ul>
            <li>ê³µì—° ì‹œì‘ í›„ ì…ì¥ì´ ë¶ˆê°€í•©ë‹ˆë‹¤.</li>
            <li>ê³µì—° ì‹œì‘ 20ë¶„ ì „ê¹Œì§€ ë„ì°© ë¶€íƒë“œë¦½ë‹ˆë‹¤.</li>
            <li>ì˜ˆë§¤ ê°€ê²©ì€ ë¬´ë£Œì´ë‚˜, ì‚¬ì „ ì˜ˆë§¤ëŠ” í•„ìˆ˜ì…ë‹ˆë‹¤.</li>
            <li>ì˜ˆë§¤ ë°©ë²•: ì¸ìŠ¤íƒ€ê·¸ë¨ @rebible_musical ë˜ëŠ” ë§í¬íŠ¸ë¦¬, QRì½”ë“œ ì´ìš©</li>
          </ul>
        </div>
      </div>
    </div>
  </section>

  <!-- 2. ì¤„ê±°ë¦¬ -->
  <section class="story">
    <h2>ì‹œë†‰ì‹œìŠ¤</h2>
    <p class="description">
      ë‹¹ì‹ ì˜ ê³ ë‚œì€ ì‹¤íŒ¨ê°€ ì•„ë‹ˆë¼, í•˜ë‚˜ë‹˜ì´ ì“°ì‹¤ ì´ì•¼ê¸°ì˜ ì‹œì‘ì…ë‹ˆë‹¤.
      í˜•ì œë“¤ì˜ ì‹œê¸°ë¡œ ë²„ë ¤ì§€ê³  ì–µìš¸í•œ ëˆ„ëª…ìœ¼ë¡œ ê°ì˜¥ì— ê°‡íŒ ìš”ì…‰.
      ëì—†ëŠ” ì¶”ë½ ê°™ë˜ ê·¸ì˜ ì¸ìƒ ì†ì—ì„œë„ í•˜ë‚˜ë‹˜ì€ ë©ˆì¶”ì§€ ì•Šìœ¼ì…¨ìŠµë‹ˆë‹¤.
      ê·¸ë¶„ì€ ëª¨ë“  ì•…ì„ ì„ ìœ¼ë¡œ ë°”ê¾¸ì‹œë©°, ìš”ì…‰ì„ ìˆ˜ë§ì€ ìƒëª…ì„ êµ¬ì›í•˜ëŠ” ì‚¬ëŒìœ¼ë¡œ ì„¸ìš°ì…¨ìŠµë‹ˆë‹¤.
      ì´ ì‘í’ˆì€ ìš°ë¦¬ì˜ ê³ ë‚œì¡°ì°¨ ì •ê¸ˆê°™ì´ ë¹šì–´ë‚´ì‹œëŠ” í•˜ë‚˜ë‹˜ì˜ ì†ê¸¸ì„ ë…¸ë˜í•©ë‹ˆë‹¤.
      ì§€ê¸ˆì˜ ëˆˆë¬¼ì€ í—›ë˜ì§€ ì•ŠìŠµë‹ˆë‹¤. ê·¸ë¶„ì˜ ê³„íšì€ ì–¸ì œë‚˜ ì™„ì „í•©ë‹ˆë‹¤.
    </p>
    <section class="video">
  <iframe 
    src="https://www.youtube.com/embed/hSMZ3utH8ww" 
    frameborder="0" 
    allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" 
    allowfullscreen>
  </iframe>
</section>
  </section>

<section>
  <h2>ë®¤ì§€ì»¬ í‹°ì € ì˜ìƒ</h2>
  <video autoplay muted loop playsinline controls>
      <source src="videos/teaser.mp4" type="video/mp4">
  </video>
</section>

<!-- 3. ì˜ìƒ -->
<section class="video">
  <h2>ë®¤ì§€ì»¬ ë©”ì´í‚¹ ì˜ìƒ</h2>
  <div class="video-grid">
    <video autoplay muted loop playsinline controls>
      <source src="videos/video1.mp4" type="video/mp4">
    </video>
    <video autoplay muted loop playsinline controls>
      <source src="videos/video2.mp4" type="video/mp4">
    </video>
    <video autoplay muted loop playsinline controls>
      <source src="videos/video3.mp4" type="video/mp4">
    </video>
    <video autoplay muted loop playsinline controls>
      <source src="videos/video4.mp4" type="video/mp4">
    </video>

  </div>
</section>



  <!-- 4. ì¶œì—°ì§„ -->
  <section class="cast-section">
    <h2>ì¶œì—°ì§„</h2>
    <p>"ë¬´ëŒ€ ìœ„ì—ì„œ í•˜ë‚˜ë‹˜ì˜ ëœ»ì„ ë…¸ë˜í•©ë‹ˆë‹¤."</p>
    <div class="cast">
      <div class="cast-card"><img src="ê¹€í›ˆì„œ.jpg" alt=""><p>ê¹€í›ˆì„œ<br>ì–´ë¦° ìš”ì…‰</p></div>
      <div class="cast-card"><img src="ê¹€ì˜ì°¬.jpg" alt=""><p>ê¹€ì˜ì°¬<br>ì–´ë¥¸ ìš”ì…‰</p></div>
      <div class="cast-card"><img src="ì´ìœ¤ì´.jpg" alt=""><p>ì´ìœ¤ì´<br>ì„œì‚¬ì</p></div>
      <div class="cast-card"><img src="ë°•ë•í¬.jpg" alt=""><p>ë°•ë•í¬<br>ì•¼ê³±</p></div>
      <div class="cast-card"><img src="ìµœì‹œì˜¨.jpg" alt=""><p>ìµœì‹œì˜¨<br>ë¥´ìš°ë²¤</p></div>
      <div class="cast-card"><img src="ê¹€í¬ì§„.jpg" alt=""><p>ì–‘í˜œë¯¼<br>ë ˆìœ„</p></div>
      <div class="cast-card"><img src="ì´ì§€í˜¸.jpg" alt=""><p>ì´ì§€í˜¸<br>ìœ ë‹¤</p></div>
      <div class="cast-card"><img src="ê¹€ë¯¸í˜œ.jpg" alt=""><p>ê¹€ë¯¸í˜œ<br>ë² ëƒë¯¼</p></div>
      <div class="cast-card"><img src="ì´í•œë¹›.jpg" alt=""><p>ì´í•œë¹›<br>íŒŒë¼ì˜¤</p></div>
<!-- ğŸ”¹ Chatbot UI Styles -->


<!-- ğŸ”¹ Chatbot UI -->
<button class="rebible-chat-toggle" aria-label="ì±—ë´‡ ì—´ê¸°">ğŸ’¬ ë¬¸ì˜í•˜ê¸°</button>
<div class="rebible-chatbox" role="dialog" aria-label="REBIBLE ì•ˆë‚´ ì±—ë´‡">
  <header>
    <div class="title"><span class="dot"></span> <span>REBIBLE ì•ˆë‚´ ì±—ë´‡</span></div>
    <button id="rebible-close" style="background:none;border:none;color:#9fb0c8;cursor:pointer;" aria-label="ë‹«ê¸°">âœ•</button>
  </header>
  <div class="messages" id="rebible-messages">
    <div class="msg bot">ì•ˆë…•í•˜ì„¸ìš”! ë®¤ì§€ì»¬ <b>REBIBLE</b>ì…ë‹ˆë‹¤. ë¬´ì—‡ì„ ë„ì™€ë“œë¦´ê¹Œìš”?</div>
  </div>
  <div class="rebible-suggestion" id="rebible-suggestions"></div>
  <div class="input">
    <input type="text" id="rebible-input" placeholder="ì˜ˆ: ì˜ˆë§¤ëŠ” ì–´ë–»ê²Œ í•˜ë‚˜ìš”?" aria-label="ì§ˆë¬¸ ì…ë ¥" />
    <button class="send" id="rebible-send">ì „ì†¡</button>
  </div>
</div>

<!-- ğŸ”¹ Chatbot Logic -->
<script>
  // 1) FAQ/KB ë°ì´í„° (í˜ì´ì§€ ì •ë³´ ê¸°ë°˜)
  const LINKS = {
    instagram: 'https://instagram.com/rebible_musical', // ğŸ‘‰ ì‹¤ì œ URLë¡œ êµì²´
    linktree: 'https://linktr.ee/rebible_musical',      // ğŸ‘‰ ì‹¤ì œ URLë¡œ êµì²´
    youtube: 'https://www.youtube.com/embed/hSMZ3utH8ww'
  };

  const KB = [
    { id: 'date', q: ['ì–¸ì œ','ì¼ì‹œ','ì‹œê°„','ì‹œì‘','ìƒì˜','ëª‡ ì‹œ','date','time'],
      a: 'ê³µì—° ì¼ì‹œëŠ” <b>2025ë…„ 11ì›” 12ì¼(ìˆ˜) 19:30</b>ì…ë‹ˆë‹¤.' },
    { id: 'venue', q: ['ì–´ë””','ì¥ì†Œ','ìœ„ì¹˜','ì£¼ì†Œ','í™€','í•™êµ','ê°€ì„œ','venue'],
      a: 'ê³µì—° ì¥ì†ŒëŠ” <b>ì„œìš¸ì‹ í•™ëŒ€í•™êµ ì¡´í† ë§ˆìŠ¤í™€</b>ì…ë‹ˆë‹¤.' },
    { id: 'ticket', q: ['ê°€ê²©','ë¹„ìš©','ìš”ê¸ˆ','ë¬´ë£Œ','í‹°ì¼“','ì…ì¥ë£Œ','fee','price'],
      a: 'í‹°ì¼“ì€ <b>ë¬´ë£Œ</b>ì´ì§€ë§Œ <b>ì‚¬ì „ ì˜ˆë§¤ í•„ìˆ˜</b>ì…ë‹ˆë‹¤.' },
    { id: 'booking', q: ['ì˜ˆë§¤','ì˜ˆì•½','ë§í¬','êµ¬ë§¤','ì‹ ì²­','ë°©ë²•','ì¸ìŠ¤íƒ€','linktree','qr','ì˜ˆë§¤ì²˜'],
      a: `ì˜ˆë§¤ëŠ” ì¸ìŠ¤íƒ€ê·¸ë¨ <b>@rebible_musical</b>ì˜ <b>ë§í¬íŠ¸ë¦¬</b> ë˜ëŠ” <b>QRì½”ë“œ</b>ë¡œ ì§„í–‰í•´ ì£¼ì„¸ìš”.
          <div class="rebible-cta" style="margin-top:8px;">
            <a href="${LINKS.instagram}" target="_blank" rel="noopener">ì¸ìŠ¤íƒ€ê·¸ë¨ ì—´ê¸°</a>
            <a href="${LINKS.linktree}" target="_blank" rel="noopener" style="margin-left:6px;">ë§í¬íŠ¸ë¦¬ ì—´ê¸°</a>
          </div>` },
    { id: 'notice', q: ['ê³µì§€','ì£¼ì˜','ì…ì¥','ì§€ê°','ë„ì°©','ìœ ì˜','ì•ˆë‚´ì‚¬í•­','ê·œì •'],
      a: 'âš  <b>ì¤‘ìš” ì•ˆë‚´</b>: ê³µì—° ì‹œì‘ í›„ <b>ì…ì¥ ë¶ˆê°€</b>, ì‹œì‘ <b>20ë¶„ ì „ê¹Œì§€</b> ë„ì°© ê¶Œì¥, ì˜ˆë§¤ëŠ” ë¬´ë£Œì§€ë§Œ <b>ì‚¬ì „ ì˜ˆë§¤ í•„ìˆ˜</b>ì…ë‹ˆë‹¤.' },
    { id: 'synopsis', q: ['ì¤„ê±°ë¦¬','ì‹œë†‰ì‹œìŠ¤','ë‚´ìš©','ìš”ì•½','ì£¼ì œ','ìŠ¤í† ë¦¬'],
      a: 'ìš”ì…‰ì˜ ì‚¶ì„ í†µí•´ ê³ ë‚œì„ ì„ ìœ¼ë¡œ ë°”ê¾¸ì‹œëŠ” í•˜ë‚˜ë‹˜ì˜ ì†ê¸¸ì„ ë…¸ë˜í•˜ëŠ” ì‘í’ˆì…ë‹ˆë‹¤.' },
    { id: 'video', q: ['ì˜ìƒ','í‹°ì €','ìœ íŠœë¸Œ','ì˜ˆê³ í¸','ë¹„ë””ì˜¤','video'],
      a: `í‹°ì € ì˜ìƒì€ <a href="${LINKS.youtube}" target="_blank" rel="noopener">ìœ íŠœë¸Œ</a>ì—ì„œ ë³´ì‹¤ ìˆ˜ ìˆì–´ìš”.` },
    { id: 'cast', q: ['ì¶œì—°','ë°°ìš°','ìºìŠ¤íŠ¸','ì¶œì—°ì§„','ëˆ„ê°€','ëª…ë‹¨','cast'],
      a: 'ì£¼ìš” ì¶œì—°: ì–´ë¦° ìš”ì…‰(ê¹€í›ˆì„œ), ì–´ë¥¸ ìš”ì…‰(ê¹€ì˜ì°¬), ì„œì‚¬ì(ì´ìœ¤ì´), ì•¼ê³±(ë°•ë•í¬), ë¥´ìš°ë²¤(ìµœì‹œì˜¨), ë ˆìœ„(ì–‘í˜œë¯¼), ìœ ë‹¤(ì´ì§€í˜¸), ë² ëƒë¯¼(ê¹€ë¯¸í˜œ), íŒŒë¼ì˜¤(ì´í•œë¹›)' },
    { id: 'parking', q: ['ì£¼ì°¨','ì°¨','parking'],
      a: 'ì£¼ì°¨ ê´€ë ¨ ì •ë³´ëŠ” í˜„ì¥ ì‚¬ì •ì— ë”°ë¼ ë‹¤ë¥¼ ìˆ˜ ìˆì–´ìš”. ì˜ˆë§¤ ì‹œ ê³µì§€ ë˜ëŠ” ì¸ìŠ¤íƒ€ê·¸ë¨ ê³µì§€ë¥¼ í™•ì¸í•´ ì£¼ì„¸ìš”.' },
    { id: 'runtime', q: ['ëŸ¬ë‹íƒ€ì„','ìƒì˜ì‹œê°„','ê¸¸ì´','duration'],
      a: 'ëŸ¬ë‹íƒ€ì„ì€ ê³µì§€ ì‹œ ì—…ë°ì´íŠ¸ë©ë‹ˆë‹¤. í˜„ì¬ëŠ” ì˜ˆë§¤ í˜ì´ì§€/ì¸ìŠ¤íƒ€ê·¸ë¨ ê³µì§€ë¥¼ ì°¸ê³ í•´ ì£¼ì„¸ìš”.' }
  ];

  // 2) ê°„ë‹¨ ìœ ì‚¬ë„/ë§¤ì¹­
  const normalize = s => (s||'').toLowerCase().replace(/[^\p{L}\p{N}\s]/gu,'').trim();

  function answerFor(query) {
    const qn = normalize(query);
    // ìš°ì„  ê·œì¹™ ê¸°ë°˜
    for (const item of KB) {
      if (item.q.some(k => qn.includes(k))) return item.a;
    }
    // ë‹¨ì–´ ìœ ì‚¬ ìŠ¤ì½”ì–´(ê°„ë‹¨)
    function score(item) {
      return item.q.reduce((acc,k)=> acc + (qn.includes(k) ? 1 : 0), 0);
    }
    const ranked = [...KB].map(i=>({i, s: score(i)})).sort((a,b)=>b.s-a.s);
    return ranked[0].s>0 ? ranked[0].i.a
      : 'ë‹¤ìŒ ì •ë³´ë¥¼ ì•ˆë‚´í•´ ë“œë ¤ìš”: <b>ì¼ì‹œ, ì¥ì†Œ, í‹°ì¼“, ì˜ˆë§¤ ë°©ë²•, ì¤‘ìš” ì•ˆë‚´ì‚¬í•­, ì¤„ê±°ë¦¬, ì˜ìƒ, ì¶œì—°ì§„</b>. ì˜ˆ: "ì˜ˆë§¤ëŠ” ì–´ë–»ê²Œ í•˜ë‚˜ìš”?"';
  }

  // 3) UI ë™ì‘
  const $toggle = document.querySelector('.rebible-chat-toggle');
  const $box = document.querySelector('.rebible-chatbox');
  const $close = document.getElementById('rebible-close');
  const $messages = document.getElementById('rebible-messages');
  const $input = document.getElementById('rebible-input');
  const $send = document.getElementById('rebible-send');
  const $suggestions = document.getElementById('rebible-suggestions');

  const suggestions = [
    'ê³µì—° ì¼ì‹œê°€ ì–¸ì œì˜ˆìš”?', 'ê³µì—° ì¥ì†Œê°€ ì–´ë””ì˜ˆìš”?', 'ì˜ˆë§¤ëŠ” ì–´ë–»ê²Œ í•´ìš”?', 'í‹°ì¼“ ê°€ê²© ì•Œë ¤ì£¼ì„¸ìš”', 'ì…ì¥ ê´€ë ¨ ìœ ì˜ì‚¬í•­ ìˆì–´ìš”?', 'ì¶œì—°ì§„ ì•Œë ¤ì¤˜ìš”', 'ì˜ìƒ ë§í¬ ë³´ì—¬ì¤˜'
  ];

  function addMsg(html, who='bot') {
    const div = document.createElement('div');
    div.className = `msg ${who}`;
    div.innerHTML = html;
    $messages.appendChild(div);
    $messages.scrollTop = $messages.scrollHeight;
  }

  function renderSuggestions() {
    $suggestions.innerHTML = '';
    suggestions.forEach(s=>{
      const b = document.createElement('button');
      b.textContent = s;
      b.addEventListener('click', ()=>{
        addMsg(s, 'user');
        addMsg(answerFor(s), 'bot');
      });
      $suggestions.appendChild(b);
    });
  }

  $toggle.addEventListener('click', ()=> {
    const open = $box.style.display==='flex';
    $box.style.display = open ? 'none' : 'flex';
    if (!open) renderSuggestions();
  });
  $close.addEventListener('click', ()=> $box.style.display='none');
  $send.addEventListener('click', ()=> {
    const v = $input.value.trim();
    if (!v) return;
    addMsg(v, 'user');
    addMsg(answerFor(v), 'bot');
    $input.value='';
    $input.focus();
  });
  $input.addEventListener('keydown', (e)=> { if (e.key==='Enter') $send.click(); });
</script>